mapboxgl.accessToken="pk.eyJ1IjoiZGFobGsiLCJhIjoiY2xoNjllazR5MDJmNzNybzZ2cHZtc3pvaSJ9.tLB2WDqOgw8RiLPbrm6TYg";const o=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[6.35582,43.11709],zoom:16});o.addControl(new mapboxgl.NavigationControl,"top-right");const e=new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:!0},showAccuracyCircle:!1,trackUserLocation:!0,showUserHeading:!0});o.addControl(e,"top-right");const t=[{id:"96",lat:43.11754,lng:6.35828},{id:"A16",lat:43.1157,lng:6.35924}],n=document.getElementById("searchForm"),a=document.getElementById("searchInput");let i;o.on("load",(()=>{e.trigger();const l=new MapboxDirections({accessToken:mapboxgl.accessToken,unit:"metric",profile:"mapbox/driving",controls:{inputs:!1,instructions:!0},trackUserLocation:!0,interactive:!1,language:"de"});o.addControl(l,"top-left");n.addEventListener("submit",(o=>{o.preventDefault();const e=a.value,n=t.find((o=>o.id===e));if(console.log(n),n){(o=>{i?(l.setOrigin(i),l.setDestination(o)):alert("Kindly enable geolocation !")})([n.lng,n.lat])}})),e.on("geolocate",(t=>{console.log(t),i=[t.coords.longitude,t.coords.latitude],l.getDestination()?l.setOrigin(i):console.log("Select Destination"),e._lastKnownPosition&&(console.log("Updating User Location"),o.easeTo({center:i,bearing:e._lastKnownPosition.coords.heading||0,duration:1e3}))}))})),e.on("error",(o=>{console.error("GeolocateControl error:",o)}));